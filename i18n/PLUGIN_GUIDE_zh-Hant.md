# Catime 外掛使用指南

## 外掛是什麼？

外掛就是一個腳本檔案，可以在 Catime 視窗裡顯示你想要的內容。比如：

- 📺 你的 B 站/YouTube 影片播放數據
- 📈 納斯達克、標普 500 即時指數
- 🌤️ 當前城市的天氣預報
- 🌐 你的網站訪問量統計
- 💻 伺服器運行狀態
- ……

**核心理念：只要你的腳本能獲取到的數據，就能在 Catime 視窗顯示出來！**

而且，這些數據會像 Catime 的時間顯示一樣，**可以放到螢幕任意角落、任意縮放大小**，隨時方便查看，不遮擋其他視窗。

**原理：** 你的腳本寫入 `output.txt` → Catime 讀取 → 顯示到視窗。就這麼簡單！

> **提示：** 使用前確保已安裝對應的腳本運行環境（如 Python、Node.js 等）

---

## 30 秒快速體驗

不想寫程式碼？先手動試試效果：

### 第 1 步：開啟外掛資料夾

右鍵 Catime 托盤圖示 → `外掛` → `開啟外掛資料夾`

### 第 2 步：編輯 output.txt

在資料夾裡找到（或新建）`output.txt`，隨便寫點內容：

```
Hello, Catime!
這是我的第一條訊息 🎉
```

### 第 3 步：顯示檔案內容

右鍵 Catime 托盤圖示 → `外掛` → `顯示外掛檔案`

**完成！** Catime 視窗現在顯示你寫的內容。

> 這就是外掛的本質：**往 output.txt 寫什麼，視窗就顯示什麼**。
> 外掛腳本只是幫你自動化這個過程。

---

## 3 步建立你的第一個外掛

### 第 1 步：開啟外掛資料夾

右鍵 Catime 托盤圖示 → `外掛` → `開啟外掛資料夾`

### 第 2 步：建立腳本檔案

在這個資料夾裡新建一個檔案，比如 `hello.py`，寫入：

```python
with open('output.txt', 'w', encoding='utf-8') as f:
    f.write('Hello, Catime!')
```

**就這麼幾行！**

### 第 3 步：執行外掛

1. 右鍵 Catime 托盤圖示
2. `外掛` → 點擊 `hello.py`
3. 第一次會問你是否信任，點「信任並執行」

**完成！** 視窗上現在顯示 "Hello, Catime!"

---

## 核心要點

你的腳本往 `output.txt` 寫什麼，Catime 就顯示什麼。檔案更新後會自動重新整理，不用手動操作。

---

## 特殊標籤（可選）

如果需要，可以用這幾個標籤：

| 標籤 | 作用 | 範例 |
|------|------|------|
| `<md></md>` | 啟用 Markdown 格式（支援完整 Markdown 語法） | `<md>**粗體** *斜體*</md>` |
| `<catime></catime>` | 顯示計時器時間 | `已執行 <catime></catime>` → `已執行 00:05:30` |
| `<exit>N</exit>` | N 秒後自動關閉外掛 | `<exit>5</exit>` → 5 秒後關閉 |
| `<fps:N>` | 每秒重新整理 N 次（預設 2 次，範圍 1-100） | `<fps:10>` → 每秒重新整理 10 次 |
| `<color:值></color>` | 設定文字顏色（與 Catime 字體顏色設定相同，支援漸層色） | `<color:#FF0000>紅色</color>` |
| `<font:路徑></font>` | 設定字體（字體檔案路徑） | `<font:C:\Windows\Fonts\comic.ttf>有趣</font>` |
| `![](path)` | 顯示圖片（支援本地路徑和網路 URL） | `![](weather.png)` 或 `![](https://example.com/img.png)` |
| `![WxH](path)` | 顯示指定尺寸的圖片 | `![100x50](logo.png)` 或 `![200](logo.png)`（只指定寬度） |

> **關於 `<fps:N>`：** 預設每 500ms 重新整理一次（即每秒 2 次）。如果你的數據更新很快，可以提高重新整理率，最高支援 `<fps:100>`（每秒 100 次）。

> **關於顏色和字體：** 這兩個標籤可以單獨使用（不需要 `<md>`），也可以巢狀使用。字體路徑支援絕對路徑（如 `C:\Windows\Fonts\arial.ttf`）、環境變數（如 `%WINDIR%\Fonts\arial.ttf`）或相對於外掛目錄的路徑。

---

## 支援哪些語言？

Python、PowerShell、Batch、JavaScript……甚至 Shell、Ruby、PHP、Lua 等 **90+ 種語言**都支援！只要你電腦上裝了對應的直譯器，寫什麼語言都行。

> **推薦：** 優先使用 **PowerShell (.ps1)** 或 **Batch (.bat)** —— Windows 內建，無需安裝任何東西，資源佔用也更低。

---

## 安全嗎？

第一次執行外掛時，Catime 會問你：

- **取消** = 不執行
- **僅執行一次** = 只執行這一次，下次還會問
- **信任並執行** = 以後都自動執行

如果你修改了外掛檔案，Catime 會重新詢問，防止被竄改。

---

## 常見問題

### 外掛不顯示內容？

檢查：
- 檔案路徑對不對（腳本要寫入同目錄下的 `output.txt`）
- 直譯器裝了沒（比如 Python 腳本需要安裝 Python）

### 怎麼停止外掛？

右鍵托盤圖示 → 外掛 → 再點一次正在執行的外掛（前面有 ✓）

### 改了外掛需要重啟嗎？

不用！儲存檔案後 Catime 會自動偵測變化並重新執行外掛（熱重載）。

### 能同時執行多個外掛嗎？

不能，一次只能執行一個。想換外掛就點另一個，當前的會自動停止。

### 關閉 Catime 後外掛還在跑嗎？

不會。Catime 關閉時會自動停止所有外掛程序。

---

## 注意事項

⚠️ **不推薦使用巢狀的子程序**

請使用單一程序完成任務。如果你的腳本啟動了子程序（比如 `.bat` 裡用 `start` 命令），可能會導致程序無法正常清理。

---

**就是這麼簡單！現在去建立你的第一個外掛吧！** 🚀
