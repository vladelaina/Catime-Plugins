# Catime 插件使用指南

## 插件是什么？

插件就是一个脚本文件，可以在 Catime 窗口里显示你想要的内容。比如：

- 📺 你的 B 站/YouTube 视频播放数据
- 📈 纳斯达克、标普 500 实时指数
- 🌤️ 当前城市的天气预报
- 🌐 你的网站访问量统计
- 💻 服务器运行状态
- ……

**核心理念：只要你的脚本能获取到的数据，就能在 Catime 窗口显示出来！**

而且，这些数据会像 Catime 的时间显示一样，**可以放到屏幕任意角落、任意缩放大小**，随时方便查看，不遮挡其他窗口。

**原理：** 你的脚本写入 `output.txt` → Catime 读取 → 显示到窗口。就这么简单！

> **提示：** 使用前确保已安装对应的脚本运行环境（如 Python、Node.js 等）

---

## 30 秒快速体验

不想写代码？先手动试试效果：

### 第 1 步：打开插件文件夹

右键 Catime 托盘图标 → `插件` → `打开插件文件夹`

### 第 2 步：编辑 output.txt

在文件夹里找到（或新建）`output.txt`，随便写点内容：

```
Hello, Catime!
这是我的第一条消息 🎉
```

### 第 3 步：显示文件内容

右键 Catime 托盘图标 → `插件` → `显示插件文件`

**完成！** Catime 窗口现在显示你写的内容。

> 这就是插件的本质：**往 output.txt 写什么，窗口就显示什么**。
> 插件脚本只是帮你自动化这个过程。

---

## 3 步创建你的第一个插件

### 第 1 步：打开插件文件夹

右键 Catime 托盘图标 → `插件` → `打开插件文件夹`

### 第 2 步：创建脚本文件

在这个文件夹里新建一个文件，比如 `hello.py`，写入：

```python
with open('output.txt', 'w', encoding='utf-8') as f:
    f.write('Hello, Catime!')
```

**就这么几行！**

### 第 3 步：运行插件

1. 右键 Catime 托盘图标
2. `插件` → 点击 `hello.py`
3. 第一次会问你是否信任，点"信任并运行"

**完成！** 窗口上现在显示 "Hello, Catime!"

---

## 核心要点

你的脚本往 `output.txt` 写什么，Catime 就显示什么。文件更新后会自动刷新，不用手动操作。

---

## 特殊标签（可选）

如果需要，可以用这几个标签：

| 标签 | 作用 | 示例 |
|------|------|------|
| `<md></md>` | 启用 Markdown 格式（支持完整 Markdown 语法） | `<md>**粗体** *斜体*</md>` |
| `<catime></catime>` | 显示计时器时间 | `已运行 <catime></catime>` → `已运行 00:05:30` |
| `<exit>N</exit>` | N 秒后自动关闭插件 | `<exit>5</exit>` → 5 秒后关闭 |
| `<fps:N>` | 每秒刷新 N 次（默认 2 次，范围 1-100） | `<fps:10>` → 每秒刷新 10 次 |
| `<color:值></color>` | 设置文字颜色（与 Catime 字体颜色设置相同，支持渐变色） | `<color:#FF0000>红色</color>` |
| `<font:路径></font>` | 设置字体（字体文件路径） | `<font:C:\Windows\Fonts\comic.ttf>有趣</font>` |
| `![](path)` | 显示图片（支持本地路径和网络 URL） | `![](weather.png)` 或 `![](https://example.com/img.png)` |
| `![WxH](path)` | 显示指定尺寸的图片 | `![100x50](logo.png)` 或 `![200](logo.png)`（只指定宽度） |

> **关于 `<fps:N>`：** 默认每 500ms 刷新一次（即每秒 2 次）。如果你的数据更新很快，可以提高刷新率，最高支持 `<fps:100>`（每秒 100 次）。

> **关于颜色和字体：** 这两个标签可以单独使用（不需要 `<md>`），也可以嵌套使用。字体路径支持绝对路径（如 `C:\Windows\Fonts\arial.ttf`）、环境变量（如 `%WINDIR%\Fonts\arial.ttf`）或相对于插件目录的路径。

---

## 支持哪些语言？

Python、PowerShell、Batch、JavaScript……甚至 Shell、Ruby、PHP、Lua 等 **90+ 种语言**都支持！只要你电脑上装了对应的解释器，写什么语言都行。

> **推荐：** 优先使用 **PowerShell (.ps1)** 或 **Batch (.bat)** —— Windows 自带，无需安装任何东西，资源占用也更低。

---

## 安全吗？

第一次运行插件时，Catime 会问你：

- **取消** = 不运行
- **仅运行一次** = 只运行这一次，下次还会问
- **信任并运行** = 以后都自动运行

如果你修改了插件文件，Catime 会重新询问，防止被篡改。

---

## 常见问题

### 插件不显示内容？

检查：
- 文件路径对不对（脚本要写入同目录下的 `output.txt`）
- 解释器装了没（比如 Python 脚本需要安装 Python）

### 怎么停止插件？

右键托盘图标 → 插件 → 再点一次正在运行的插件（前面有 ✓）

### 改了插件需要重启吗？

不用！保存文件后 Catime 会自动检测变化并重新运行插件（热重载）。

### 能同时运行多个插件吗？

不能，一次只能运行一个。想换插件就点另一个，当前的会自动停止。

### 关闭 Catime 后插件还在跑吗？

不会。Catime 关闭时会自动停止所有插件进程。

---

## 注意事项

⚠️ **不推荐使用嵌套的子进程**

请使用单一进程完成任务。如果你的脚本启动了子进程（比如 `.bat` 里用 `start` 命令），可能会导致进程无法正常清理。

---

**就是这么简单！现在去创建你的第一个插件吧！** 🚀
