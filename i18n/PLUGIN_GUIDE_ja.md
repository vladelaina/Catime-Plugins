# Catime プラグインガイド

## プラグインとは？

プラグインは、Catimeウィンドウにカスタムコンテンツを表示するスクリプトファイルです。例えば：

- 📺 Bilibili/YouTubeの動画統計
- 📈 リアルタイムのNASDAQとS&P 500指数
- 🌤️ 地域の天気予報
- 🌐 ウェブサイトのトラフィック統計
- 💻 サーバーステータス
- ……

**コアコンセプト：スクリプトで取得できるデータは、すべてCatimeウィンドウに表示できます！**

さらに、このデータはCatimeの時間表示と同様に、画面上のどこにでも配置でき、任意のサイズに拡大縮小できます — 他のウィンドウを遮ることなく常に表示されます。

**仕組み：** スクリプトが `output.txt` に書き込む → Catimeが読み取る → ウィンドウに表示。シンプルです！

> **ヒント：** 必要なランタイム環境（Python、Node.jsなど）がインストールされていることを確認してください

---

## 30秒クイックスタート

コードを書きたくない？まず手動で試してみましょう：

### ステップ1：プラグインフォルダを開く

Catimeトレイアイコンを右クリック → `プラグイン` → `プラグインフォルダを開く`

### ステップ2：output.txtを編集

フォルダ内の `output.txt` を見つけて（または作成して）、何か書きます：

```
こんにちは、Catime！
これは私の最初のメッセージです 🎉
```

### ステップ3：ファイル内容を表示

Catimeトレイアイコンを右クリック → `プラグイン` → `プラグインファイルを表示`

**完了！** Catimeウィンドウにあなたのコンテンツが表示されます。

> これがプラグインの本質です：**output.txtに書いたものがウィンドウに表示されます**。
> プラグインスクリプトはこのプロセスを自動化するだけです。

---

## 3ステップで最初のプラグインを作成

### ステップ1：プラグインフォルダを開く

Catimeトレイアイコンを右クリック → `プラグイン` → `プラグインフォルダを開く`

### ステップ2：スクリプトファイルを作成

このフォルダに新しいファイルを作成します。例えば `hello.py`：

```python
with open('output.txt', 'w', encoding='utf-8') as f:
    f.write('こんにちは、Catime！')
```

**たった数行です！**

### ステップ3：プラグインを実行

1. Catimeトレイアイコンを右クリック
2. `プラグイン` → `hello.py` をクリック
3. 初回は信頼するか聞かれます。「信頼して実行」をクリック

**完了！** ウィンドウに「こんにちは、Catime！」と表示されます。

---

## キーポイント

スクリプトが `output.txt` に書き込んだものを、Catimeが表示します。ファイルが更新されると表示も自動的に更新されます。

---

## 特殊タグ（オプション）

必要に応じてこれらのタグを使用してください：

| タグ | 機能 | 例 |
|------|------|-----|
| `<md></md>` | Markdownフォーマットを有効化 | `<md>**太字** *斜体*</md>` |
| `<catime></catime>` | タイマー時間を表示 | `実行中 <catime></catime>` → `実行中 00:05:30` |
| `<exit>N</exit>` | N秒後にプラグインを自動終了 | `<exit>5</exit>` → 5秒後に終了 |
| `<fps:N>` | 1秒間にN回更新（デフォルト2、範囲1-100） | `<fps:10>` → 1秒間に10回更新 |
| `<color:値></color>` | テキスト色を設定（グラデーション対応） | `<color:#FF0000>赤</color>` |
| `<font:パス></font>` | フォントを設定（フォントファイルパス） | `<font:C:\Windows\Fonts\comic.ttf>楽しい</font>` |
| `![](パス)` | 画像を表示（ローカルパスまたはURL） | `![](weather.png)` または `![](https://example.com/img.png)` |
| `![幅x高](パス)` | 指定サイズで画像を表示 | `![100x50](logo.png)` または `![200](logo.png)`（幅のみ） |

> **`<fps:N>` について：** デフォルトの更新は500msごと（1秒に2回）です。高速更新データの場合、`<fps:100>`（1秒に100回）まで上げられます。

> **色とフォントについて：** これらのタグは単独で動作し（`<md>`不要）、ネストも可能です。フォントパスは絶対パス、環境変数、またはプラグインディレクトリからの相対パスをサポートします。

---

## サポートされている言語

Python、PowerShell、Batch、JavaScript...さらにShell、Ruby、PHP、Luaなど**90以上の言語**がサポートされています！インタープリターがインストールされていれば、どの言語でも動作します。

> **推奨：** **PowerShell (.ps1)** または **Batch (.bat)** を使用してください — Windowsに組み込まれており、インストール不要、リソース使用量も少ないです。

---

## 安全ですか？

プラグインを初めて実行するとき、Catimeは次のように尋ねます：

- **キャンセル** = 実行しない
- **一度だけ実行** = 今回のみ実行、次回も再度尋ねる
- **信頼して実行** = 常に自動実行

プラグインファイルを変更すると、改ざん防止のためCatimeは再度尋ねます。

---

## よくある質問

### プラグインがコンテンツを表示しない？

確認してください：
- ファイルパスが正しい（スクリプトは同じディレクトリの `output.txt` に書き込む必要があります）
- インタープリターがインストールされている（例：PythonスクリプトにはPythonが必要）

### プラグインを停止するには？

トレイアイコンを右クリック → プラグイン → 実行中のプラグインを再度クリック（✓マーク付き）

### 編集後に再起動が必要？

いいえ！Catimeは変更を自動検出してプラグインを再実行します（ホットリロード）。

### 複数のプラグインを実行できますか？

いいえ、一度に1つだけです。別のプラグインをクリックして切り替えると、現在のものは自動的に停止します。

### Catimeを閉じた後もプラグインは実行され続けますか？

いいえ。Catimeは終了時にすべてのプラグインプロセスを停止します。

---

## 注意事項

⚠️ **ネストされたサブプロセスは避けてください**

タスクを完了するには単一のプロセスを使用してください。スクリプトがサブプロセスを生成する場合（例：`.bat`で`start`を使用）、適切にクリーンアップされない可能性があります。

---

**以上です！さあ、最初のプラグインを作成しましょう！** 🚀
